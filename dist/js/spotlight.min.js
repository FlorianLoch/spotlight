/**
 * Spotlight.js v0.7.3
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b){a.classList.add(b)}function g(a,b){a.classList.remove(b)}function h(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){h(a,"transition","none");b();aa||(aa=a.clientTop&&0);h(a,"transition","")}function k(a,b,c,e){a.addEventListener(b,c,e||!1===e?e:!0)}function ca(a,b,c,e){a.removeEventListener(b,c,e||!1===e?e:!0)}function ea(a,b){a.stopPropagation();b&&a.preventDefault()};var l=document.createElement("div");l.id="spotlight";l.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";/*
 toggle_autofit &&*/
var m="theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),fa={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1},ha=document.createElement("video"),n={},ia={},p,r,ja,ka,t,la,u,v,w,ma,na,oa,x,y,z,A,B,C,D,pa,qa,ra,sa,ta,E,F,G,ua,va,wa,xa,ya,za,Aa,H,I,J,K,L,M,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,N,O,La,P,Q,Ma,R,Na;k(document,"click",Oa);
function Pa(){function a(c){return n[c]=(l||document).getElementsByClassName("spl-"+c)[0]}I=document.body;M=a("scene");Ba=a("header");Ca=a("footer");Da=a("title");Ea=a("description");Fa=a("button");Ga=a("prev");Ha=a("next");Ja=a("page");N=a("progress");K=[a("pane")];S("close",Qa);I[R="requestFullscreen"]||I[R="msRequestFullscreen"]||I[R="webkitRequestFullscreen"]||I[R="mozRequestFullscreen"]||(R="");R?(Na=R.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),Ia=S("fullscreen",
Ra)):m.pop();S("autofit",T);S("zoom-in",Sa);S("zoom-out",Ta);S("theme",Ua);Ka=S("play",U);S("download",Va);k(Ga,"click",Wa);k(Ha,"click",V);var b=a("track");k(b,"mousedown",Xa);k(b,"mousemove",Ya);k(b,"mouseleave",Za);k(b,"mouseup",Za);k(b,"touchstart",Xa,{passive:!1});k(b,"touchmove",Ya,{passive:!0});k(b,"touchend",Za);k(Fa,"click",function(){wa?wa(y,B):va&&(location.href=va)})}
function S(a,b){var c=document.createElement("div");c.className="spl-"+a;k(c,"click",b);Ba.appendChild(c);return n[a]=c}function Oa(a){var b=a.target.closest(".spotlight");if(b){ea(a,!0);a=b.closest(".spotlight-group");A=(a||document).getElementsByClassName("spotlight");for(var c=0;c<A.length;c++)if(A[c]===b){C=a&&a.dataset;$a(c+1);break}}}
function $a(a){if(z=A.length){I||Pa();qa&&qa(a);for(var b=K[0],c=b.parentNode,e=K.length;e<z;e++){var f=b.cloneNode(!1);h(f,"left",100*e+"%");c.appendChild(f);K[e]=f}J||(I.appendChild(l),ab());y=a||1;W(M);bb(!0);history.pushState({spl:1},"");history.pushState({spl:2},"");cb(l);d(I,"hide-scrollbars");d(l,"show");db(!0);ab();X();F&&U()}}function Y(a,b){a=B[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function eb(a){a?ba(L,eb):((Aa?cb:W)(M),h(L,"opacity",za?0:1),fb(ya&&.8),H&&d(L,H))}
function gb(a,b){J=K[a-1];L=J.firstChild;y=a;if(L)x&&T(),ta&&d(L,ta),eb(!0),H&&g(L,H),za&&h(L,"opacity",1),ya&&h(L,"transform",""),h(L,"visibility","visible"),b&&La&&(document.createElement("img").src=La);else{var c=O.media,e=Y("spinner",!0);e&&d(l,"spinner");"video"===c?(L=document.createElement("video"),L.onloadedmetadata=function(){L.width=L.videoWidth;L.height=L.videoHeight;hb();e&&g(l,"spinner");gb(a,b)},L.poster=B.poster,L.preload=ua?"auto":"metadata",L.controls=Y("controls",!0),L.autoplay=
F,L.h=Y("inline"),L.muted=Y("muted"),L.src=O.src,J.appendChild(L)):"node"===c?(L=O.src,"string"===typeof L&&(L=document.querySelector(L)),L.g||(L.g=L.parentNode),hb(),e&&g(l,"spinner"),J.appendChild(L),gb(a,b)):(L=document.createElement("img"),L.onload=function(){e&&g(l,"spinner");u=this.width;v=this.height;gb(a,b)},L.onerror=function(){J.removeChild(this)},L.crossOrigin="anonymous",L.src=O.src,J.appendChild(L));L&&(e||h(L,"visibility","visible"))}}
function ib(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function ab(){t=l.clientWidth;la=l.clientHeight;L&&hb();R&&(ib()?d(Ia,"on"):(g(Ia,"on"),jb(Ia,0<=screen.availHeight-window.outerHeight)))}function hb(){u=L.clientWidth;v=L.clientHeight}function fb(a){h(L,"transform","translate(-50%, -50%) scale("+(a||w)+")")}function Z(a,b){h(J,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function kb(a,b,c){b?ba(M,function(){kb(a,!1,c)}):h(M,"transform","translateX("+(100*-a+(c||0))+"%)")}function db(a){a=a?k:ca;a(window,"keydown",lb);a(window,"wheel",mb);a(window,"resize",ab);a(window,"popstate",nb)}function nb(a){J&&a.state.spl&&Qa(!0)}function lb(a){if(J)switch(a.keyCode){case 8:T();break;case 27:Qa();break;case 32:F&&U();break;case 37:Wa();break;case 39:V();break;case 38:case 107:case 187:Sa();break;case 40:case 109:case 189:Ta()}}
function mb(a){J&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Ta():Sa())}function U(a){("boolean"===typeof a?a:!P)?P||(P=setInterval(V,1E3*xa),d(Ka,"on"),pa&&ob(!0)):P&&(P=clearInterval(P),g(Ka,"on"),pa&&ob())}function ob(a){ba(N,function(){h(N,"transition-duration","");h(N,"transform","")});a&&(h(N,"transition-duration",xa+"s"),h(N,"transform","translateX(0)"))}function X(){E&&(Ma=Date.now()+1E3*E-50,Q||(d(l,"menu"),pb(1E3*E)))}
function pb(a){Q=setTimeout(function(){var b=Date.now();b>=Ma?(g(l,"menu"),Q=0):pb(Ma-b)},a)}function rb(a){"boolean"===typeof a&&(Q=a?Q:0);Q?(Q=clearTimeout(Q),g(l,"menu")):X()}function Xa(a){ea(a,!0);ma=!0;na=!1;var b=a.touches;b&&(b=b[0])&&(a=b);oa=u*w<=t;ja=a.pageX;ka=a.pageY;W(J)}function Za(a){ea(a);if(ma){if(na){if(oa&&na){var b=(a=p<-(t/7)&&(y<z||D))||p>t/7&&(1<y||D);if(a||b)kb(y-1,!0,p/t*100),a&&V()||b&&Wa();p=0;Z()}cb(J)}else rb();ma=!1}}
function Ya(a){ea(a);if(ma){var b=a.touches;b&&(b=b[0])&&(a=b);b=(u*w-t)/2;p-=ja-(ja=a.pageX);oa||(p>b?p=b:p<-b&&(p=-b),v*w>la&&(b=(v*w-la)/2,r-=ka-(ka=a.pageY),r>b?r=b:r<-b&&(r=-b)));na=!0;Z(p,r)}else X()}function Ra(a){var b=ib();if("boolean"!==typeof a||a!==!!b)if(b)document[Na]();else l[R]()}function Ua(a){"object"===typeof a&&(a=G?"":"white");G!==a&&(G&&g(l,G),a&&d(l,a),G=a)}
function T(a){"boolean"===typeof a&&(x=!a);(x=1===w&&!x)?d(L,"autofit"):g(L,"autofit");h(L,"transform","");u=L.width;v=L.height;w=1;r=p=0;W(J);Z();X()}function Sa(a){var b=w/.65;50>=b&&(x&&T(),p/=.65,r/=.65,Z(p,r),sb(b));a||X()}function Ta(a){var b=.65*w;x&&T();1<=b&&(1===b?p=r=0:(p*=.65,r*=.65),Z(p,r),sb(b));a||X()}function sb(a){w=a||1;fb()}
function Va(){var a=document.createElement("a");a.href=L.src;a.download=L.src.substring(L.src.lastIndexOf("/")+1);I.appendChild(a);a.click();I.removeChild(a)}function Qa(a){setTimeout(function(){I.removeChild(l);J=L=O=B=C=A=qa=ra=sa=wa=null},200);g(I,"hide-scrollbars");g(l,"show");Ra(!1);db();history.go(!0===a?-1:-2);P&&U(!1);L&&tb(L);sa&&sa()}function tb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a)}}
function Wa(a){a&&X();if(1<z){if(1<y)return ub(y-1);if(D)return kb(z,!0),ub(z)}}function V(a){a&&X();if(1<z){if(y<z)return ub(y+1);if(D)return kb(-1,!0),ub(1);P&&U(!1)}}function ub(a){if(a!==y){P||X();P&&(P=clearInterval(P),U());var b=a>y;y=a;bb(b);return!0}}var vb=navigator.connection,wb=window.devicePixelRatio||1;
function xb(a,b,c){var e;if("video"===L||!(e=c.src||c.href||a.src||a.href)){a=Object.keys(c);for(var f=0,q;f<a.length;f++)if(q=a[f],0===q.indexOf("src"))if("video"===L){var da=ia[q];if(da){if(0<da){e=c[q];break}}else if(ha.canPlayType("video/"+q.substring(3).toLowerCase())){ia[q]=1;e=c[q];break}else ia[q]=-1}else if(da=Math.abs(b-parseInt(q.substring(4),10)),!qb||da<qb){var qb=da;e=c[q]}}return e}
function yb(){var a=A[y-1],b=a;B={};C&&Object.assign(B,C);Object.assign(B,b.dataset||b);Ua(B.theme);wa=B.onclick;E=Y("autohide",3);D=Y("infinite");pa=Y("progress",!0);F=Y("autoplay");ua=Y("preload",!0);va=Y("buttonHref");xa=F&&parseFloat(F)||7;if(b=B.control){b="string"===typeof b?b.split(","):b;for(var c=0;c<m.length;c++)B[m[c]]=!1;for(c=0;c<b.length;c++){var e=b[c].trim();"zoom"===e?B["zoom-in"]=B["zoom-out"]=!0:B[e]=!0}}b=B.animation;ya=za=Aa=!b;H=!1;if(b)for(b="string"===typeof b?b.split(","):
b,c=0;c<b.length;c++)e=b[c].trim(),"scale"===e?ya=!0:"fade"===e?za=!0:"slide"===e?Aa=!0:e&&(H=e);ta=B.fit;c=vb&&vb.downlink;b=Math.max(la,t)*wb;c&&1200*c<b&&(b=1200*c);var f;c=B.media;e=xb(a,b,B);var q;(q=a.alt||a.title)||(q=(f=(a||document).getElementsByTagName("img")[0])&&(f.alt||f.title));O={media:c,src:e,title:Y("title",q)};La="";ua&&(a=A[y])&&(f=a.dataset||a,f.media&&"image"!==f.media||(La=xb(a,b,f)));for(a=0;a<m.length;a++)f=m[a],jb(n[f],Y(f,fa[f]))}
function bb(a){r=p=0;w=1;yb();kb(y-1);if(L){var b=L;setTimeout(function(){b&&L!==b&&(tb(b),b=null)},650);eb()}gb(y,a);J&&(W(J),Z());a=O.title;var c=Y("description"),e=Y("button"),f=a||c||e;f&&(a&&(Da.firstChild.nodeValue=a),c&&(Ea.firstChild.nodeValue=c),e&&(Fa.firstChild.nodeValue=e),jb(Da,a),jb(Ea,c),jb(Fa,e),h(Ca,"transform","all"===E?"":"none"));E||d(l,"menu");zb(Ca,f);zb(Ga,D||1<y);zb(Ha,D||y<z);Ja.firstChild.nodeValue=1<z?y+" / "+z:"";ra&&ra(y,B)}
function jb(a,b){h(a,"display",b?"":"none")}function zb(a,b){h(a,"visibility",b?"":"hidden")}function W(a){h(a,"transition","none")}function cb(a){h(a,"transition","")};window.Spotlight={init:Pa,theme:Ua,fullscreen:Ra,download:Va,autofit:T,next:V,prev:Wa,goto:ub,close:Qa,zoom:sb,menu:rb,show:function(a,b,c){A=a;b&&(C=b,qa=b.onshow,ra=b.onchange,sa=b.onclose,c=c||b.index);$a(c)},play:U,addControl:S,removeControl:function(a){var b=n[a];b&&(Ba.removeChild(b),n[a]=null)}};}).call(this);
