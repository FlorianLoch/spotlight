/**
 * Spotlight.js v0.7.3
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b){a.classList.remove(b)}function g(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){g(a,"transition","none");b();aa||(aa=a.clientTop&&0);g(a,"transition","")}function h(a,b,c,e){a.addEventListener(b,c,e||!1===e?e:!0)}function da(a,b,c,e){a.removeEventListener(b,c,e||!1===e?e:!0)}function ea(a,b){a.stopPropagation();b&&a.preventDefault()};var k=document.createElement("div");k.id="spotlight";k.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";/*
 toggle_autofit &&*/
var l="theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),fa={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1},ha=document.createElement("video"),m={},ia={},n,p,ja,ka,r,la,t,u,v,ma,na,oa,w,x,y,z,A,B,C,pa,qa,ra,sa,ta,D,E,F,ua,va,wa,xa,ya,za,Aa,G,H,I,J,K,L,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,M,N,La,O,P,Ma,Q,Na;h(document,"click",Oa);
function Pa(){function a(c){return m[c]=(k||document).getElementsByClassName("spl-"+c)[0]}H=document.body;L=a("scene");Ba=a("header");Ca=a("footer");Da=a("title");Ea=a("description");Fa=a("button");Ga=a("prev");Ha=a("next");Ja=a("page");M=a("progress");J=[a("pane")];R("close",Qa);H[Q="requestFullscreen"]||H[Q="msRequestFullscreen"]||H[Q="webkitRequestFullscreen"]||H[Q="mozRequestFullscreen"]||(Q="");Q?(Na=Q.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),Ia=R("fullscreen",
Ra)):l.pop();R("autofit",S);R("zoom-in",Sa);R("zoom-out",Ta);R("theme",Ua);Ka=R("play",T);R("download",Va);h(Ga,"click",Wa);h(Ha,"click",U);var b=a("track");h(b,"mousedown",Xa);h(b,"mousemove",Ya);h(b,"mouseleave",Za);h(b,"mouseup",Za);h(b,"touchstart",Xa,{passive:!1});h(b,"touchmove",Ya,{passive:!0});h(b,"touchend",Za);h(Fa,"click",function(){wa?wa(x,A):va&&(location.href=va)})}
function R(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);Ba.appendChild(c);return m[a]=c}function Oa(a){var b=a.target.closest(".spotlight");if(b){ea(a,!0);a=b.closest(".spotlight-group");z=(a||document).getElementsByClassName("spotlight");for(var c=0;c<z.length;c++)if(z[c]===b){B=a&&a.dataset;$a(c+1);break}}}
function $a(a){if(y=z.length){H||Pa();qa&&qa(a);for(var b=J[0],c=b.parentNode,e=J.length;e<y;e++){var f=b.cloneNode(!1);g(f,"left",100*e+"%");c.appendChild(f);J[e]=f}I||(H.appendChild(k),ab());x=a||1;V(L);bb(!0);history.pushState({spl:1},"");history.pushState({spl:2},"");cb(k);H.classList.add("hide-scrollbars");k.classList.add("show");db(!0);ab();W();E&&T()}}function X(a,b){a=A[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function eb(a){a?ba(K,eb):((Aa?cb:V)(L),g(K,"opacity",za?0:1),fb(ya&&.8),G&&K.classList.add(G))}
function gb(a,b){I=J[a-1];K=I.firstChild;x=a;if(K)w&&S(),ta&&K.classList.add(ta),eb(!0),G&&d(K,G),za&&g(K,"opacity",1),ya&&g(K,"transform",""),g(K,"visibility","visible"),b&&La&&(document.createElement("img").src=La);else{var c=N.media,e=X("spinner",!0);e&&k.classList.add("spinner");"video"===c?(K=document.createElement("video"),K.onloadedmetadata=function(){K.width=K.videoWidth;K.height=K.videoHeight;hb();e&&d(k,"spinner");gb(a,b)},K.poster=A.poster,K.preload=ua?"auto":"metadata",K.controls=X("controls",
!0),K.autoplay=E,K.h=X("inline"),K.muted=X("muted"),K.src=N.src,I.appendChild(K)):"node"===c?(K=N.src,"string"===typeof K&&(K=document.querySelector(K)),K.g||(K.g=K.parentNode),hb(),e&&d(k,"spinner"),I.appendChild(K),gb(a,b)):(K=document.createElement("img"),K.onload=function(){e&&d(k,"spinner");t=this.width;u=this.height;gb(a,b)},K.onerror=function(){I.removeChild(this)},K.crossOrigin="anonymous",K.src=N.src,I.appendChild(K));K&&(e||g(K,"visibility","visible"))}}
function ib(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function ab(){r=k.clientWidth;la=k.clientHeight;K&&hb();Q&&(ib()?Ia.classList.add("on"):(d(Ia,"on"),Y(Ia,0<=screen.availHeight-window.outerHeight)))}function hb(){t=K.clientWidth;u=K.clientHeight}function fb(a){g(K,"transform","translate(-50%, -50%) scale("+(a||v)+")")}function Z(a,b){g(I,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function jb(a,b,c){b?ba(L,function(){jb(a,!1,c)}):g(L,"transform","translateX("+(100*-a+(c||0))+"%)")}function db(a){a=a?h:da;a(window,"keydown",kb);a(window,"wheel",lb);a(window,"resize",ab);a(window,"popstate",mb)}function mb(a){I&&a.state.spl&&Qa(!0)}function kb(a){if(I)switch(a.keyCode){case 8:S();break;case 27:Qa();break;case 32:E&&T();break;case 37:Wa();break;case 39:U();break;case 38:case 107:case 187:Sa();break;case 40:case 109:case 189:Ta()}}
function lb(a){I&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Ta():Sa())}function T(a){("boolean"===typeof a?a:!O)?O||(O=setInterval(U,1E3*xa),Ka.classList.add("on"),pa&&nb(!0)):O&&(O=clearInterval(O),d(Ka,"on"),pa&&nb())}function nb(a){ba(M,function(){g(M,"transition-duration","");g(M,"transform","")});a&&(g(M,"transition-duration",xa+"s"),g(M,"transform","translateX(0)"))}function W(){D&&(Ma=Date.now()+1E3*D-50,P||(k.classList.add("menu"),ob(1E3*D)))}
function ob(a){P=setTimeout(function(){var b=Date.now();b>=Ma?(d(k,"menu"),P=0):ob(Ma-b)},a)}function qb(a){"boolean"===typeof a&&(P=a?P:0);P?(P=clearTimeout(P),d(k,"menu")):W()}function Xa(a){ea(a,!0);ma=!0;na=!1;var b=a.touches;b&&(b=b[0])&&(a=b);oa=t*v<=r;ja=a.pageX;ka=a.pageY;V(I)}function Za(a){ea(a);if(ma){if(na){if(oa&&na){var b=(a=n<-(r/7)&&(x<y||C))||n>r/7&&(1<x||C);if(a||b)jb(x-1,!0,n/r*100),a&&U()||b&&Wa();n=0;Z()}cb(I)}else qb();ma=!1}}
function Ya(a){ea(a);if(ma){var b=a.touches;b&&(b=b[0])&&(a=b);b=(t*v-r)/2;n-=ja-(ja=a.pageX);oa||(n>b?n=b:n<-b&&(n=-b),u*v>la&&(b=(u*v-la)/2,p-=ka-(ka=a.pageY),p>b?p=b:p<-b&&(p=-b)));na=!0;Z(n,p)}else W()}function Ra(a){var b=ib();if("boolean"!==typeof a||a!==!!b)if(b)document[Na]();else k[Q]()}function Ua(a){"object"===typeof a&&(a=F?"":"white");F!==a&&(F&&d(k,F),a&&k.classList.add(a),F=a)}
function S(a){"boolean"===typeof a&&(w=!a);(w=1===v&&!w)?K.classList.add("autofit"):d(K,"autofit");g(K,"transform","");t=K.width;u=K.height;v=1;p=n=0;V(I);Z();W()}function Sa(a){var b=v/.65;50>=b&&(w&&S(),n/=.65,p/=.65,Z(n,p),rb(b));a||W()}function Ta(a){var b=.65*v;w&&S();1<=b&&(1===b?n=p=0:(n*=.65,p*=.65),Z(n,p),rb(b));a||W()}function rb(a){v=a||1;fb()}
function Va(){var a=document.createElement("a");a.href=K.src;a.download=K.src.substring(K.src.lastIndexOf("/")+1);H.appendChild(a);a.click();H.removeChild(a)}function Qa(a){setTimeout(function(){H.removeChild(k);I=K=N=A=B=z=qa=ra=sa=wa=null},200);d(H,"hide-scrollbars");d(k,"show");Ra(!1);db();history.go(!0===a?-1:-2);O&&T(!1);K&&sb(K);sa&&sa()}function sb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a)}}
function Wa(a){a&&W();if(1<y){if(1<x)return tb(x-1);if(C)return jb(y,!0),tb(y)}}function U(a){a&&W();if(1<y){if(x<y)return tb(x+1);if(C)return jb(-1,!0),tb(1);O&&T(!1)}}function tb(a){if(a!==x){O||W();O&&(O=clearInterval(O),T());var b=a>x;x=a;bb(b);return!0}}var ub=navigator.connection,vb=window.devicePixelRatio||1;
function wb(a,b,c){var e;if("video"===K||!(e=c.src||c.href||a.src||a.href)){a=Object.keys(c);for(var f=0,q;f<a.length;f++)if(q=a[f],0===q.indexOf("src"))if("video"===K){var ca=ia[q];if(ca){if(0<ca){e=c[q];break}}else if(ha.canPlayType("video/"+q.substring(3).toLowerCase())){ia[q]=1;e=c[q];break}else ia[q]=-1}else if(ca=Math.abs(b-parseInt(q.substring(4),10)),!pb||ca<pb){var pb=ca;e=c[q]}}return e}
function xb(){var a=z[x-1],b=a;A={};B&&Object.assign(A,B);Object.assign(A,b.dataset||b);Ua(A.theme);wa=A.onclick;D=X("autohide",3);C=X("infinite");pa=X("progress",!0);E=X("autoplay");ua=X("preload",!0);va=X("buttonHref");xa=E&&parseFloat(E)||7;if(b=A.control){b="string"===typeof b?b.split(","):b;for(var c=0;c<l.length;c++)A[l[c]]=!1;for(c=0;c<b.length;c++){var e=b[c].trim();"zoom"===e?A["zoom-in"]=A["zoom-out"]=!0:A[e]=!0}}b=A.animation;ya=za=Aa=!b;G=!1;if(b)for(b="string"===typeof b?b.split(","):
b,c=0;c<b.length;c++)e=b[c].trim(),"scale"===e?ya=!0:"fade"===e?za=!0:"slide"===e?Aa=!0:e&&(G=e);ta=A.fit;c=ub&&ub.downlink;b=Math.max(la,r)*vb;c&&1200*c<b&&(b=1200*c);var f;c=A.media;e=wb(a,b,A);var q;(q=a.alt||a.title)||(q=(f=(a||document).getElementsByTagName("img")[0])&&(f.alt||f.title));N={media:c,src:e,title:X("title",q)};La="";ua&&(a=z[x])&&(f=a.dataset||a,f.media&&"image"!==f.media||(La=wb(a,b,f)));for(a=0;a<l.length;a++)f=l[a],Y(m[f],X(f,fa[f]))}
function bb(a){p=n=0;v=1;xb();jb(x-1);if(K){var b=K;setTimeout(function(){b&&K!==b&&(sb(b),b=null)},650);eb()}gb(x,a);I&&(V(I),Z());a=N.title;var c=X("description"),e=X("button"),f=a||c||e;f&&(a&&(Da.firstChild.nodeValue=a),c&&(Ea.firstChild.nodeValue=c),e&&(Fa.firstChild.nodeValue=e),Y(Da,a),Y(Ea,c),Y(Fa,e),g(Ca,"transform","all"===D?"":"none"));yb(Ca,f);yb(Ga,C||1<x);yb(Ha,C||x<y);Ja.firstChild.nodeValue=1<y?x+" / "+y:"";ra&&ra(x,A)}function Y(a,b){g(a,"display",b?"":"none")}
function yb(a,b){g(a,"visibility",b?"":"hidden")}function V(a){g(a,"transition","none")}function cb(a){g(a,"transition","")};window.Spotlight={init:Pa,theme:Ua,fullscreen:Ra,download:Va,autofit:S,next:U,prev:Wa,goto:tb,close:Qa,zoom:rb,menu:qb,show:function(a,b,c){z=a;b&&(B=b,qa=b.onshow,ra=b.onchange,sa=b.onclose,c=c||b.index);$a(c)},play:T,addControl:R,removeControl:function(a){var b=m[a];b&&(Ba.removeChild(b),m[a]=null)}};}).call(this);
