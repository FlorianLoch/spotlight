/**
 * Spotlight.js v0.7.0
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){console.log("assign",a,b);for(var d=Object.keys(b),e=0,f;e<d.length;e++)f=d[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){console.log("closest",a);a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function c(a,b){a.classList.remove(b)}function g(a,b,d){d=""+d;a["_s_"+b]!==d&&(a.style.setProperty(b,d),a["_s_"+b]=d)}var ba=0;function ca(a,b){g(a,"transition","none");b();ba||(ba=a.clientTop&&0);g(a,"transition","")}function h(a,b,d,e){a.addEventListener(b,d,e||!1===e?e:!0)}function da(a,b,d,e){a.removeEventListener(b,d,e||!1===e?e:!0)}function k(a,b){a.stopPropagation();b&&a.preventDefault()};var l=document.createElement("div");l.id="spotlight";l.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div><div class=spl-close></div><div class=spl-fullscreen></div><div class=spl-autofit></div><div class=spl-zoom-in></div><div class=spl-zoom-out></div><div class=spl-theme></div><div class=spl-play></div><div class=spl-download></div></div><div class=spl-progress></div><div class=spl-arrow-left></div><div class=spl-arrow-right></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div>";/*
 toggle_autofit &&*/
var m="theme download play page close autofit zoom-in zoom-out arrow-left arrow-right fullscreen".split(" "),ea={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,"arrow-left":1,"arrow-right":1,fullscreen:1},fa={},ha=document.createElement("video"),ia={},n,p,ja,ka,r,la,t,u,v,ma,na,oa,w,x,y,z,A,pa,B,qa,ra,sa,ta,C,D,ua,va,wa,xa,ya,E,F,G,H,I,za,Aa,Ba,Ca,Da,Ea,J,Fa,Ga,K,L,M,Ha,N,O,Ia,P,Ja;h(document,"click",Ka);
function La(){function a(d){return fa[d]=(l||document).getElementsByClassName("spl-"+d)[0]}N=document.body;I=a("scene");za=a("footer");Aa=a("title");Ba=a("description");Ca=a("button");Da=a("arrow-left");Ea=a("arrow-right");J=a("fullscreen");Fa=a("page");Ga=a("play");K=a("progress");G=[a("pane")];N[P="requestFullscreen"]||N[P="msRequestFullscreen"]||N[P="webkitRequestFullscreen"]||N[P="mozRequestFullscreen"]||(P="");P?Ja=P.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"):(m.pop(),Q(J,!1));var b=a("track");h(b,"mousedown",Ma);h(b,"mousemove",Na);h(b,"mouseleave",Oa);h(b,"mouseup",Oa);h(b,"touchstart",Ma,{passive:!1});h(b,"touchmove",Na,{passive:!0});h(b,"touchend",Oa);h(J,"click",Pa);h(Da,"click",Qa);h(Ea,"click",R);h(Ga,"click",S);h(a("autofit"),"click",T);h(a("zoom-in"),"click",Ra);h(a("zoom-out"),"click",Sa);h(a("close"),"click",Ta);h(a("download"),"click",Ua);h(a("theme"),"click",Va)}
function Ka(a){var b=a.target.closest(".spotlight");if(b){k(a,!0);a=b.closest(".spotlight-group");z=(a||document).getElementsByClassName("spotlight");for(var d=0;d<z.length;d++)if(z[d]===b){Wa(z,a?a.dataset:{},d+1);break}}}
function Wa(a,b,d){z=a;pa=b||(b={});ra=b.onchange;a=d||b.index;if(y=z.length){N||La();b=G[0];d=b.parentNode;for(var e=G.length;e<y;e++){var f=b.cloneNode(!1);g(f,"left",100*e+"%");d.appendChild(f);G[e]=f}F||(N.appendChild(l),Xa());x=a||1;U(I);Ya(!0)}history.pushState({spl:1},"");history.pushState({spl:2},"");Za(l);N.classList.add("hide-scrollbars");l.classList.add("show");$a(!0);Xa();V();C&&S()}function W(a,b){a=A[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function ab(a){a?ca(H,ab):((ya?Za:U)(I),g(H,"opacity",xa?0:1),g(H,"transform","translate(-50%, -50%)"+(wa?" scale(0.8)":"")),E&&H.classList.add(E))}
function bb(a,b){F=G[a-1];H=F.firstChild;x=a;if(H)w&&T(),sa&&H.classList.add(sa),ab(!0),E&&c(H,E),xa&&g(H,"opacity",1),wa&&g(H,"transform",""),g(H,"visibility","visible"),b&&Ia&&((new Image).src=Ia);else{var d=O.media,e=W("spinner",!0);e&&l.classList.add("spinner");"video"===d?(H=document.createElement("video"),H.onloadedmetadata=function(){H.width=H.videoWidth;H.height=H.videoHeight;cb();e&&c(l,"spinner");bb(a,b)},H.poster=A.poster,H.preload=ua?"auto":"metadata",H.controls=W("controls",!0),H.autoplay=
C,H.h=W("inline"),H.muted=W("muted"),H.src=O.src,F.appendChild(H)):"node"===d?(H=O.src,"string"===typeof H&&(H=document.querySelector(H)),H.g=H.parentNode,cb(),e&&c(l,"spinner"),F.appendChild(H),bb(a,b)):(H=new Image,H.onload=function(){e&&c(l,"spinner");t=this.width;u=this.height;bb(a,b)},H.onerror=function(){F.removeChild(this)},H.crossOrigin="anonymous",H.src=O.src,F.appendChild(H));H&&(e||g(H,"visibility","visible"))}}function Xa(){r=l.clientWidth;la=l.clientHeight;H&&cb()}
function cb(){t=H.clientWidth;u=H.clientHeight}function X(a,b){g(F,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}function Y(a,b,d){b?ca(I,function(){Y(a,!1,d)}):g(I,"transform","translateX("+(100*-a+(d||0))+"%)")}function $a(a){a=a?h:da;a(window,"keydown",db);a(window,"wheel",eb);a(window,"resize",Xa);a(window,"popstate",gb)}function gb(a){F&&a.state&&a.state.spl&&(Ta(!0),history.back(),k(a))}
function db(a){if(F)switch(a.keyCode){case 8:T();break;case 27:Ta();break;case 32:C&&S();break;case 37:Qa();break;case 39:R();break;case 38:case 107:case 187:Ra();break;case 40:case 109:case 189:Sa()}}function eb(a){F&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Sa():Ra())}function S(a){("boolean"===typeof a?a:!L)?L||(L=setInterval(R,1E3*va),Ga.classList.add("on"),qa&&hb(!0)):L&&(L=clearInterval(L),c(Ga,"on"),qa&&hb())}
function hb(a){ca(K,function(){g(K,"transition-duration","");g(K,"transform","")});a&&(g(K,"transition-duration",va+"s"),g(K,"transform","translateX(0)"))}function V(){ta&&(Ha=Date.now()+1E3*ta-50,M||(l.classList.add("menu"),ib(1E3*ta)))}function ib(a){M=setTimeout(function(){var b=Date.now();b>=Ha?(c(l,"menu"),M=0):ib(Ha-b)},a)}function jb(a){"boolean"===typeof a&&(M=a?M:0);M?(M=clearTimeout(M),c(l,"menu")):V()}
function Ma(a){k(a,!0);ma=!0;na=!1;var b=a.touches;b&&(b=b[0])&&(a=b);oa=t*v<=r;ja=a.pageX;ka=a.pageY;U(F)}function Oa(a){k(a);if(ma){if(na){if(oa&&na){var b=(a=n<-(r/7)&&(x<y||B))||n>r/7&&(1<x||B);if(a||b)Y(x-1,!0,n/r*100),a&&R()||b&&Qa();n=0;X()}Za(F)}else jb();ma=!1}}function Na(a){k(a);if(ma){var b=a.touches;b&&(b=b[0])&&(a=b);b=(t*v-r)/2;n-=ja-(ja=a.pageX);oa||(n>b?n=b:n<-b&&(n=-b),u*v>la&&(b=(u*v-la)/2,p-=ka-(ka=a.pageY),p>b?p=b:p<-b&&(p=-b)));na=!0;X(n,p)}else V()}
function Pa(a){("boolean"===typeof a?a:document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)?(document[Ja](),c(J,"on")):(l[P](),J.classList.add("on"))}function Va(a){"object"===typeof a&&(a=D?"":"white");D!==a&&(D&&c(l,D),a&&l.classList.add(a),D=a)}function T(a){"boolean"===typeof a&&(w=!a);(w=1===v&&!w)?H.classList.add("autofit"):c(H,"autofit");g(H,"transform","");t=H.width;u=H.height;v=1;p=n=0;U(F);X();V()}
function Ra(a){var b=v/.65;50>=b&&(w&&T(),n/=.65,p/=.65,X(n,p),kb(b));a||V()}function Sa(a){var b=.65*v;w&&T();1<=b&&(1===b?n=p=0:(n*=.65,p*=.65),X(n,p),kb(b));a||V()}function kb(a){v=a||1;g(H,"transform","translate(-50%, -50%) scale("+v+")")}function Ua(){var a=document.createElement("a");a.href=H.src;a.download=H.src.substring(H.src.lastIndexOf("/")+1);N.appendChild(a);a.click();N.removeChild(a)}
function Ta(a){setTimeout(function(){N.removeChild(l);F=H=O=A=pa=z=ra=null},200);c(N,"hide-scrollbars");c(l,"show");$a();history.go(!0===a?-1:-2);L&&S(!1);H&&H.parentNode&&H.parentNode.removeChild(H)}function Qa(a){a&&V();if(1<y){if(1<x)return Z(x-1);if(B)return Y(y,!0),Z(y)}}function R(a){a&&V();if(1<y){if(x<y)return Z(x+1);if(B)return Y(-1,!0),Z(1);L&&S(!1)}}function Z(a){if(a!==x){L||V();L&&(L=clearInterval(L),S());var b=a>x;x=a;Ya(b);return!0}}
var lb=navigator.connection,mb=window.devicePixelRatio||1;function nb(a,b,d){var e;if("video"===H||!(e=d.src||d.href||a.src||a.href)){a=Object.keys(d);for(var f=0,q;f<a.length;f++)if(q=a[f],0===q.indexOf("src"))if("video"===H){var aa=ia[q];if(aa){if(0<aa){e=d[q];break}}else if(ha.canPlayType("video/"+q.substring(3).toLowerCase())){ia[q]=1;e=d[q];break}else ia[q]=-1}else if(aa=Math.abs(b-parseInt(q.substring(4),10)),!fb||aa<fb){var fb=aa;e=d[q]}}return e}
function ob(){var a=z[x-1],b=a;A={};Object.assign(A,pa);Object.assign(A,b.dataset||b);Va(A.theme);ta=W("autohide",3);B=W("infinite");qa=W("progress",!0);C=W("autoplay");ua=W("preload",!0);C&&(va=parseFloat(C)||7);if(b=A.control){b="string"===typeof b?b.split(","):b;for(var d=0;d<m.length;d++)A[m[d]]=!1;for(d=0;d<b.length;d++){var e=b[d].trim();"zoom"===e?A["zoom-in"]=A["zoom-out"]=!0:A[e]=!0}}b=A.animation;wa=xa=ya=!b;E=!1;if(b)for(b="string"===typeof b?b.split(","):b,d=0;d<b.length;d++)e=b[d].trim(),
"scale"===e?wa=!0:"fade"===e?xa=!0:"slide"===e?ya=!0:e&&(E=e);sa=A.fit;d=lb&&lb.downlink;b=Math.max(la,r)*mb;d&&1200*d<b&&(b=1200*d);var f;d=A.media;e=nb(a,b,A);var q;(q=W("title")||a.title||a.alt)||(q=(f=(a||document).getElementsByTagName("img")[0])&&f.alt);O={media:d,src:e,title:q};Ia="";ua&&(a=z[x])&&(f=a.dataset||a,f.media&&"image"!==f.media||(Ia=nb(a,b,f)));for(a=0;a<m.length;a++)f=m[a],Q(fa[f],W(f)||ea[f])}
function Ya(a){p=n=0;v=1;ob();Y(x-1);if(H){var b=H;setTimeout(function(){b&&H!==b&&b.parentNode&&(b.parentNode.removeChild(b),b=null)},650);ab()}bb(x,a);F&&(U(F),X());a=O.title;var d=W("description"),e=W("button"),f=a||d||e;f&&(a&&(Aa.firstChild.nodeValue=a),d&&(Ba.firstChild.nodeValue=d),e&&(Ca.firstChild.nodeValue=e),Q(Aa,a),Q(Ba,d),Q(Ca,e));pb(za,f);pb(Da,B||1<x);pb(Ea,B||x<y);Fa.firstChild.nodeValue=1<y?x+" / "+y:"";ra&&ra(x,A)}function Q(a,b){g(a,"display",b?"":"none")}
function pb(a,b){g(a,"visibility",b?"":"hidden")}function U(a){g(a,"transition","none")}function Za(a){g(a,"transition","")};window.Spotlight={theme:Va,fullscreen:Pa,download:Ua,autofit:T,next:R,prev:Qa,goto:Z,close:Ta,zoom:kb,menu:jb,show:Wa,play:S};}).call(this);
