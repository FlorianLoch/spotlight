/**
 * Spotlight.js v0.7.1
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){console.log("assign",a,b);for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){console.log("closest",a);a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b){a.classList.remove(b)}function g(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var ba=0;function ca(a,b){g(a,"transition","none");b();ba||(ba=a.clientTop&&0);g(a,"transition","")}function h(a,b,c,e){a.addEventListener(b,c,e||!1===e?e:!0)}function da(a,b,c,e){a.removeEventListener(b,c,e||!1===e?e:!0)}function ea(a,b){a.stopPropagation();b&&a.preventDefault()};var k=document.createElement("div");k.id="spotlight";k.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-arrow-left></div><div class=spl-arrow-right></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div>";/*
 toggle_autofit &&*/
var l="theme download play page close autofit zoom-in zoom-out arrow-left arrow-right fullscreen".split(" "),fa={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,"arrow-left":1,"arrow-right":1,fullscreen:1},ha=document.createElement("video"),ia=document.createElement("div"),m={},ja={},n,p,ka,la,r,ma,t,u,v,na,oa,pa,w,x,y,z,A,B,C,qa,ra,sa,ta,ua,va,D,E,wa,xa,ya,za,Aa,Ba,Ca,F,G,H,I,J,K,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,L,M,Na,N,O,Oa,P,Pa;h(document,"click",Qa);
function Ra(){function a(c){return m[c]=(k||document).getElementsByClassName("spl-"+c)[0]}G=document.body;K=a("scene");Da=a("header");Ea=a("footer");Fa=a("title");Ga=a("description");Ha=a("button");Ia=a("arrow-left");Ja=a("arrow-right");La=a("page");L=a("progress");I=[a("pane")];Q("close",Sa);G[P="requestFullscreen"]||G[P="msRequestFullscreen"]||G[P="webkitRequestFullscreen"]||G[P="mozRequestFullscreen"]||(P="");P?(Pa=P.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Ka=Q("fullscreen",Ta)):l.pop();Q("autofit",R);Q("zoom-in",Ua);Q("zoom-out",Va);Q("theme",Wa);Ma=Q("play",S);Q("download",Xa);h(Ia,"click",Ya);h(Ja,"click",T);var b=a("track");h(b,"mousedown",Za);h(b,"mousemove",$a);h(b,"mouseleave",ab);h(b,"mouseup",ab);h(b,"touchstart",Za,{passive:!1});h(b,"touchmove",$a,{passive:!0});h(b,"touchend",ab);h(Ha,"click",function(){ya?ya(x,A):xa&&(location.href=xa)})}
function Q(a,b){var c=ia.cloneNode(!1);c.className="spl-"+a;h(c,"click",b);Da.appendChild(c);return m[a]=c}function Qa(a){var b=a.target.closest(".spotlight");if(b){ea(a,!0);a=b.closest(".spotlight-group");z=(a||document).getElementsByClassName("spotlight");for(var c=0;c<z.length;c++)if(z[c]===b){B=a&&a.dataset;bb(c+1);break}}}
function bb(a){if(y=z.length){G||Ra();ra&&ra(a);for(var b=I[0],c=b.parentNode,e=I.length;e<y;e++){var f=b.cloneNode(!1);g(f,"left",100*e+"%");c.appendChild(f);I[e]=f}H||(G.appendChild(k),cb());x=a||1;U(K);db(!0);history.pushState({spl:1},"");history.pushState({spl:2},"");eb(k);G.classList.add("hide-scrollbars");k.classList.add("show");fb(!0);cb();V();D&&S()}}function W(a,b){a=A[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function gb(a){a?ca(J,gb):((Ca?eb:U)(K),g(J,"opacity",Ba?0:1),g(J,"transform","translate(-50%, -50%)"+(Aa?" scale(0.8)":"")),F&&J.classList.add(F))}
function hb(a,b){H=I[a-1];J=H.firstChild;x=a;if(J)w&&R(),ua&&J.classList.add(ua),gb(!0),F&&d(J,F),Ba&&g(J,"opacity",1),Aa&&g(J,"transform",""),g(J,"visibility","visible"),b&&Na&&((new Image).src=Na);else{var c=M.media,e=W("spinner",!0);e&&k.classList.add("spinner");"video"===c?(J=document.createElement("video"),J.onloadedmetadata=function(){J.width=J.videoWidth;J.height=J.videoHeight;ib();e&&d(k,"spinner");hb(a,b)},J.poster=A.poster,J.preload=wa?"auto":"metadata",J.controls=W("controls",!0),J.autoplay=
D,J.h=W("inline"),J.muted=W("muted"),J.src=M.src,H.appendChild(J)):"node"===c?(J=M.src,"string"===typeof J&&(J=document.querySelector(J)),J.g||(J.g=J.parentNode),ib(),e&&d(k,"spinner"),H.appendChild(J),hb(a,b)):(J=new Image,J.onload=function(){e&&d(k,"spinner");t=this.width;u=this.height;hb(a,b)},J.onerror=function(){H.removeChild(this)},J.crossOrigin="anonymous",J.src=M.src,H.appendChild(J));J&&(e||g(J,"visibility","visible"))}}function cb(){r=k.clientWidth;ma=k.clientHeight;J&&ib()}
function ib(){t=J.clientWidth;u=J.clientHeight}function X(a,b){g(H,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}function Y(a,b,c){b?ca(K,function(){Y(a,!1,c)}):g(K,"transform","translateX("+(100*-a+(c||0))+"%)")}function fb(a){a=a?h:da;a(window,"keydown",jb);a(window,"wheel",kb);a(window,"resize",cb);a(window,"popstate",lb)}function lb(a){H&&a.state.spl&&Sa(!0)}
function jb(a){if(H)switch(a.keyCode){case 8:R();break;case 27:Sa();break;case 32:D&&S();break;case 37:Ya();break;case 39:T();break;case 38:case 107:case 187:Ua();break;case 40:case 109:case 189:Va()}}function kb(a){H&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Va():Ua())}function S(a){("boolean"===typeof a?a:!N)?N||(N=setInterval(T,1E3*za),Ma.classList.add("on"),qa&&nb(!0)):N&&(N=clearInterval(N),d(Ma,"on"),qa&&nb())}
function nb(a){ca(L,function(){g(L,"transition-duration","");g(L,"transform","")});a&&(g(L,"transition-duration",za+"s"),g(L,"transform","translateX(0)"))}function V(){va&&(Oa=Date.now()+1E3*va-50,O||(k.classList.add("menu"),ob(1E3*va)))}function ob(a){O=setTimeout(function(){var b=Date.now();b>=Oa?(d(k,"menu"),O=0):ob(Oa-b)},a)}function pb(a){"boolean"===typeof a&&(O=a?O:0);O?(O=clearTimeout(O),d(k,"menu")):V()}
function Za(a){ea(a,!0);na=!0;oa=!1;var b=a.touches;b&&(b=b[0])&&(a=b);pa=t*v<=r;ka=a.pageX;la=a.pageY;U(H)}function ab(a){ea(a);if(na){if(oa){if(pa&&oa){var b=(a=n<-(r/7)&&(x<y||C))||n>r/7&&(1<x||C);if(a||b)Y(x-1,!0,n/r*100),a&&T()||b&&Ya();n=0;X()}eb(H)}else pb();na=!1}}function $a(a){ea(a);if(na){var b=a.touches;b&&(b=b[0])&&(a=b);b=(t*v-r)/2;n-=ka-(ka=a.pageX);pa||(n>b?n=b:n<-b&&(n=-b),u*v>ma&&(b=(u*v-ma)/2,p-=la-(la=a.pageY),p>b?p=b:p<-b&&(p=-b)));oa=!0;X(n,p)}else V()}
function Ta(a){("boolean"===typeof a?a:document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)?(document[Pa](),d(Ka,"on")):(k[P](),Ka.classList.add("on"))}function Wa(a){"object"===typeof a&&(a=E?"":"white");E!==a&&(E&&d(k,E),a&&k.classList.add(a),E=a)}function R(a){"boolean"===typeof a&&(w=!a);(w=1===v&&!w)?J.classList.add("autofit"):d(J,"autofit");g(J,"transform","");t=J.width;u=J.height;v=1;p=n=0;U(H);X();V()}
function Ua(a){var b=v/.65;50>=b&&(w&&R(),n/=.65,p/=.65,X(n,p),qb(b));a||V()}function Va(a){var b=.65*v;w&&R();1<=b&&(1===b?n=p=0:(n*=.65,p*=.65),X(n,p),qb(b));a||V()}function qb(a){v=a||1;g(J,"transform","translate(-50%, -50%) scale("+v+")")}function Xa(){var a=document.createElement("a");a.href=J.src;a.download=J.src.substring(J.src.lastIndexOf("/")+1);G.appendChild(a);a.click();G.removeChild(a)}
function Sa(a){setTimeout(function(){G.removeChild(k);H=J=M=A=B=z=ra=sa=ta=ya=null},200);d(G,"hide-scrollbars");d(k,"show");fb();history.go(!0===a?-1:-2);N&&S(!1);J&&rb(J);ta&&ta()}function rb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a)}}function Ya(a){a&&V();if(1<y){if(1<x)return Z(x-1);if(C)return Y(y,!0),Z(y)}}function T(a){a&&V();if(1<y){if(x<y)return Z(x+1);if(C)return Y(-1,!0),Z(1);N&&S(!1)}}
function Z(a){if(a!==x){N||V();N&&(N=clearInterval(N),S());var b=a>x;x=a;db(b);return!0}}var sb=navigator.connection,tb=window.devicePixelRatio||1;
function ub(a,b,c){var e;if("video"===J||!(e=c.src||c.href||a.src||a.href)){a=Object.keys(c);for(var f=0,q;f<a.length;f++)if(q=a[f],0===q.indexOf("src"))if("video"===J){var aa=ja[q];if(aa){if(0<aa){e=c[q];break}}else if(ha.canPlayType("video/"+q.substring(3).toLowerCase())){ja[q]=1;e=c[q];break}else ja[q]=-1}else if(aa=Math.abs(b-parseInt(q.substring(4),10)),!mb||aa<mb){var mb=aa;e=c[q]}}return e}
function vb(){var a=z[x-1],b=a;A={};B&&Object.assign(A,B);Object.assign(A,b.dataset||b);Wa(A.theme);va=W("autohide",3);C=W("infinite");qa=W("progress",!0);D=W("autoplay");wa=W("preload",!0);xa=W("buttonHref");D&&(za=parseFloat(D)||7);if(b=A.control){b="string"===typeof b?b.split(","):b;for(var c=0;c<l.length;c++)A[l[c]]=!1;for(c=0;c<b.length;c++){var e=b[c].trim();"zoom"===e?A["zoom-in"]=A["zoom-out"]=!0:A[e]=!0}}b=A.animation;Aa=Ba=Ca=!b;F=!1;if(b)for(b="string"===typeof b?b.split(","):b,c=0;c<b.length;c++)e=
b[c].trim(),"scale"===e?Aa=!0:"fade"===e?Ba=!0:"slide"===e?Ca=!0:e&&(F=e);ua=A.fit;c=sb&&sb.downlink;b=Math.max(ma,r)*tb;c&&1200*c<b&&(b=1200*c);var f;c=A.media;e=ub(a,b,A);var q;(q=W("title")||a.title||a.alt)||(q=(f=(a||document).getElementsByTagName("img")[0])&&f.alt);M={media:c,src:e,title:q};Na="";wa&&(a=z[x])&&(f=a.dataset||a,f.media&&"image"!==f.media||(Na=ub(a,b,f)));for(a=0;a<l.length;a++)f=l[a],wb(m[f],W(f,fa[f]))}
function db(a){p=n=0;v=1;vb();Y(x-1);if(J){var b=J;setTimeout(function(){b&&J!==b&&(rb(b),b=null)},650);gb()}hb(x,a);H&&(U(H),X());a=M.title;var c=W("description"),e=W("button"),f=a||c||e;f&&(a&&(Fa.firstChild.nodeValue=a),c&&(Ga.firstChild.nodeValue=c),e&&(Ha.firstChild.nodeValue=e),wb(Fa,a),wb(Ga,c),wb(Ha,e));xb(Ea,f);xb(Ia,C||1<x);xb(Ja,C||x<y);La.firstChild.nodeValue=1<y?x+" / "+y:"";sa&&sa(x,A)}function wb(a,b){g(a,"display",b?"":"none")}function xb(a,b){g(a,"visibility",b?"":"hidden")}
function U(a){g(a,"transition","none")}function eb(a){g(a,"transition","")};window.Spotlight={theme:Wa,fullscreen:Ta,download:Xa,autofit:R,next:T,prev:Ya,goto:Z,close:Sa,zoom:qb,menu:pb,show:function(a,b,c){z=a;b&&(B=b,ra=b.onshow,sa=b.onchange,ta=b.onclose,ya=b.onclick,c=c||b.index);bb(c)},play:S,addControl:Q,removeControl:function(a){var b=m[a];b&&(Da.removeChild(b),m[a]=null)}};}).call(this);
