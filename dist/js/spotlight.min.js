/**
 * Spotlight.js v0.7.8
 * Copyright 2019-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b){a.classList.add(b)}function g(a,b){a.classList.remove(b)}function h(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){b&&(h(a,"transition","none"),b());aa||(aa=a.clientTop&&0);b&&h(a,"transition","")}function k(a,b,c,e){ca(!0,a,b,c,e)}function ca(a,b,c,e,f){b[(a?"add":"remove")+"EventListener"](c,e,f||!1===f?f:!0)}function da(a,b){a.stopPropagation();b&&a.preventDefault()}function l(a,b){h(a,"display",b?"":"none")}
function ea(a,b){h(a,"visibility",b?"":"hidden")}function m(a,b){h(a,"transition",b?"":"none")};var fa="info theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),ha={info:1,page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1};var n=document.createElement("div");n.id="spotlight";n.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";var ia={},ja=document.createElement("video");function ka(a,b,c,e){if("node"!==e)for(var f=Object.keys(c),r=0,y;r<f.length;r++)if(y=f[r],3<y.length&&0===y.indexOf("src"))if("video"===e){var H=ia[y];if(H){if(0<H){var Ma=c[y];break}}else if(ja.canPlayType("video/"+y.substring(3).replace("-","").toLowerCase())){ia[y]=1;Ma=c[y];break}else ia[y]=-1}else if(H=parseInt(y.substring(4),10))if(H=Math.abs(b-H),!mb||H<mb){var mb=H;Ma=c[y]}return Ma||c.src||c.href||a.src||a.href};var la={},ma=navigator.connection,na=window.devicePixelRatio||1,p,q,oa,t,u,v,pa,qa,w,x,ra,sa,ta,z,A,B,C,D,E,F,ua,va,G,wa,xa,ya,za,Aa,Ba,I,Ca,Da,Ea,Fa,J,Ga,Ha,Ia,Ja,K,L,M,Ka,N,La=document.createElement("img"),Na,Oa,O,Pa=!1,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,P,Ya,Q,R,S,T,Za,U,$a;k(document,"click",ab);
function bb(){function a(c){return la[c]=(n||document).getElementsByClassName("spl-"+c)[0]}if(!L){L=document.body;Na=a("scene");Oa=a("header");O=a("footer");Qa=a("title");Ra=a("description");Sa=a("button");Ta=a("prev");Ua=a("next");Wa=a("page");P=a("progress");Ya=a("spinner");Ka=[a("pane")];V("close",cb);L[U="requestFullscreen"]||L[U="msRequestFullscreen"]||L[U="webkitRequestFullscreen"]||L[U="mozRequestFullscreen"]||(U="");U?($a=U.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Va=V("fullscreen",db)):fa.pop();V("info",eb);V("autofit",fb);V("zoom-in",gb);V("zoom-out",hb);V("theme",ib);Xa=V("play",W);V("download",jb);k(Ta,"click",kb);k(Ua,"click",lb);var b=a("track");k(b,"mousedown",nb);k(b,"mousemove",ob);k(b,"mouseleave",pb);k(b,"mouseup",pb);k(b,"touchstart",nb,{passive:!1});k(b,"touchmove",ob,{passive:!0});k(b,"touchend",pb);k(Sa,"click",function(){Fa?Fa(C,F):Ea&&(location.href=Ea)})}}
function V(a,b){var c=document.createElement("div");c.className="spl-"+a;k(c,"click",b);Oa.appendChild(c);return la[a]=c}function ab(a){if(!z){var b=a.target.closest(".spotlight");if(b){da(a,!0);a=b.closest(".spotlight-group");E=(a||document).getElementsByClassName("spotlight");for(var c=0;c<E.length;c++)if(E[c]===b){va=a&&a.dataset;qb(c+1);break}}}}
function qb(a){if(D=E.length){L||bb();xa&&xa(a);for(var b=Ka[0],c=b.parentNode,e=Ka.length;e<D;e++){var f=b.cloneNode(!1);h(f,"left",100*e+"%");c.appendChild(f);Ka[e]=f}M||(L.appendChild(n),rb());C=a||1;m(Na);sb(!0);U&&l(Va,0<screen.availHeight-window.innerHeight);history.pushState({spl:1},"");history.pushState({spl:2},"");m(n,!0);d(L,"hide-scrollbars");d(n,"show");tb(!0);rb();X();I&&W(!0,!0)}}function Y(a,b){a=F[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function ub(a){a?ba(N,ub):(m(Na,Ja),h(N,"opacity",Ia?0:1),vb(Ha&&.8),K&&d(N,K))}
function wb(a){M=Ka[a-1];N=M.firstChild;C=a;if(N)A&&fb(),Aa&&d(N,Aa),ub(!0),K&&g(N,K),Ia&&h(N,"opacity",1),Ha&&h(N,"transform",""),h(N,"visibility","visible"),R&&(La.src=R),I&&xb(S);else{var b=Q.media,c=Y("spinner",!0);if("video"===b)yb(c,!0),N=document.createElement("video"),N.onloadedmetadata=function(){N===this&&(N.onerror=null,N.width=N.videoWidth,N.height=N.videoHeight,zb(),yb(c),wb(a))},N.poster=F.poster,N.preload=Da?"auto":"metadata",N.controls=Y("controls",!0),N.autoplay=F.autoplay,N.j=Y("inline"),
N.muted=Y("muted"),N.src=Q.src,M.appendChild(N);else{if("node"===b){N=Q.src;"string"===typeof N&&(N=document.querySelector(N));N&&(N.g||(N.g=N.parentNode),N.h||(N.h=N.getAttribute("style")),N.setAttribute("style",N.i||""),zb(),M.appendChild(N),wb(a));return}yb(c,!0);N=document.createElement("img");N.onload=function(){N===this&&(N.onerror=null,yb(c),wb(a),zb())};N.src=Q.src;M.appendChild(N)}N&&(c||h(N,"visibility","visible"),N.onerror=function(){N===this&&(Ab(N),d(Ya,"error"),yb(c))})}}
function yb(a,b){a&&(a=Ya,b?d(a,"spin"):g(a,"spin"))}function Bb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function Cb(){rb();N&&zb();if(U){var a=Bb(),b=Va;a?d(b,"on"):g(b,"on");a||l(Va,0<screen.availHeight-window.innerHeight)}}function rb(){u=n.clientWidth;v=n.clientHeight}function zb(){pa=N.clientWidth;qa=N.clientHeight}function vb(a){h(N,"transform","translate(-50%, -50%) scale("+(a||w)+")")}
function Z(a,b){h(M,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}function Db(a,b,c){b?ba(Na,function(){Db(a,!1,c)}):h(Na,"transform","translateX("+(100*-a+(c||0))+"%)")}function tb(a){ca(a,window,"keydown",Eb);ca(a,window,"wheel",Fb);ca(a,window,"resize",Cb);ca(a,window,"popstate",Gb)}function Gb(a){M&&a.state.spl&&cb(!0)}
function Eb(a){if(M){var b=!1!==F["zoom-in"];switch(a.keyCode){case 8:b&&fb();break;case 27:cb();break;case 32:I&&W();break;case 37:kb();break;case 39:lb();break;case 38:case 107:case 187:b&&gb();break;case 40:case 109:case 189:b&&hb();break;case 73:eb()}}}function Fb(a){if(M&&!1!==F["zoom-in"]){var b=a.deltaY;0>.5*(0>b?1:b?-1:0)?hb(a,a.clientX,a.clientY):gb(a,a.clientX,a.clientY)}}function W(a,b){("boolean"===typeof a?a:!S)===!S&&(S=S?clearTimeout(S):1,a=Xa,S?d(a,"on"):g(a,"on"),b||xb(S))}
function xb(a){wa&&(ba(P,function(){h(P,"transition-duration","");h(P,"transform","")}),a&&(h(P,"transition-duration",Ga+"s"),h(P,"transform","translateX(0)")));a&&(S=setTimeout(lb,1E3*Ga))}function X(){Ba&&(Za=Date.now()+2950,T||(d(n,"menu"),Hb(3E3)))}function Hb(a){T=setTimeout(function(){var b=Date.now();b>=Za?(g(n,"menu"),T=0):Hb(Za-b)},a)}function Ib(a){"boolean"===typeof a&&(T=a?T:0);T?(T=clearTimeout(T),g(n,"menu")):X()}
function nb(a){da(a,!0);ra=!0;z=sa=!1;var b=a;(x=a=a.touches)&&(a=a[0])&&(b=a);ta=pa*w<=u;oa=b.pageX;t=b.pageY;m(M)}function pb(a){da(a);x=null;if(ra){if(sa){if(ta&&sa){var b=(a=p<-(u/7)&&(C<D||G))||p>u/7&&(1<C||G);if(a||b)Db(C-1,!0,p/u*100),a&&lb()||b&&kb();z&&q<-(v/4)?cb():q=p=0;Z()}m(M,!0)}else Ib();ra=!1}}function Jb(a){return Math.sqrt(Math.pow(a[0].clientX-a[1].clientX,2)+Math.pow(a[0].clientY-a[1].clientY,2))}
function ob(a){da(a);if(ra){var b;if((b=a.touches)&&2===b.length&&x&&2===x.length){var c=[.5*(b[0].clientX+b[1].clientX),.5*(b[0].clientY+b[1].clientY)];Kb(Jb(b)/Jb(x),c[0],c[1],!1)}(b=(x=b)&&b[0])&&(a=b);sa||(b=oa-a.pageX,c=t-a.pageY,z=ta&&c>1.15*Math.abs(b));z?q-=t-(t=a.pageY):p-=oa-(oa=a.pageX);ta||(b=(pa*w-u)/2,p>b?p=b:p<-b&&(p=-b),qa*w>v&&(b=(qa*w-v)/2,q-=t-(t=a.pageY),q>b?q=b:q<-b&&(q=-b)));sa=!0;Z(p,q)}else X()}
function db(a){var b=Bb();if("boolean"!==typeof a||a!==!!b)if(b)document[$a]();else n[U]()}function ib(a){"string"!==typeof a&&(a=B?"":Ca||"white");B!==a&&(B&&g(n,B),a&&d(n,a),B=a)}function fb(a){"boolean"===typeof a&&(A=!a);A=1===w&&!A;a=N;A?d(a,"autofit"):g(a,"autofit");h(N,"transform","");w=1;q=p=0;zb();m(M);Z()}function Kb(a,b,c,e){var f=w*a;m(M,e);m(N,e);A&&fb();if(1>=f)p=q=0,Z(p,q),Lb(1);else if(!(50<f)){if(c){e=u/2;var r=v/2;p=b-(b-p-e)*a-e;q=c-(c-q-r)*a-r}else p*=a,q*=a;Z(p,q);Lb(f)}}
function gb(a,b,c){Kb(1/.65,b,c,!0)}function hb(a,b,c){Kb(.65,b,c,!0)}function Lb(a){w=a||1;vb()}function eb(){Pa=!Pa;ea(O,Pa)}function jb(){var a=L,b=document.createElement("a"),c=N.src;b.href=c;b.download=c.substring(c.lastIndexOf("/")+1);a.appendChild(b);b.click();a.removeChild(b)}
function cb(a){setTimeout(function(){L.removeChild(n);M=N=Q=F=va=E=xa=ya=za=Fa=null;z=!1},200);g(L,"hide-scrollbars");g(n,"show");db(!1);tb();history.go(!0===a?-1:-2);R&&(La.src="");S&&W();N&&Ab(N);T&&(T=clearTimeout(T));B&&ib();J&&g(n,J);za&&za()}function Ab(a){if(a.g)a.i=a.getAttribute("style"),a.setAttribute("style",a.h||""),a.g.appendChild(a),a.g=a.h=null;else{var b=a.parentNode;b&&b.removeChild(a);a.onerror=null;a.src=""}}
function kb(a){a&&X();if(1<D){if(1<C)return Mb(C-1);if(G)return Db(D,!0),Mb(D)}}function lb(a){a&&X();if(1<D){if(C<D)return Mb(C+1);if(G)return Db(-1,!0),Mb(1);S&&W()}}function Mb(a){if(a!==C){S?(clearTimeout(S),xb()):X();var b=a>C;C=a;sb(b);return!0}}
function Nb(a){var b=E[C-1],c=b;F={};va&&Object.assign(F,va);Object.assign(F,c.dataset||c);ua=F.media;Fa=F.onclick;Ca=F.theme;J=F["class"];Ba=Y("autohide",!0);G=Y("infinite");wa=Y("progress",!0);I=Y("autoslide");Da=Y("preload",!0);Ea=F.buttonHref;Ga=I&&parseFloat(I)||7;B||Ca&&ib(Ca);J&&d(n,J);J&&ba(n);if(c=F.control){c="string"===typeof c?c.split(","):c;for(var e=0;e<fa.length;e++)F[fa[e]]=!1;for(e=0;e<c.length;e++){var f=c[e].trim();"zoom"===f?F["zoom-in"]=F["zoom-out"]=!0:F[f]=!0}}c=F.animation;
Ha=Ia=Ja=!c;K=!1;if(c)for(c="string"===typeof c?c.split(","):c,e=0;e<c.length;e++)f=c[e].trim(),"scale"===f?Ha=!0:"fade"===f?Ia=!0:"slide"===f?Ja=!0:f&&(K=f);Aa=F.fit;e=ma&&ma.downlink;c=Math.max(v,u)*na;e&&1200*e<c&&(c=1200*e);var r;Q={media:ua,src:ka(b,c,F,ua),title:Y("title",b.alt||b.title||(r=b.firstElementChild)&&(r.alt||r.title))};R&&(La.src=R="");Da&&a&&(b=E[C])&&(a=b.dataset||b,(r=a.media)&&"image"!==r||(R=ka(b,c,a,r)));for(b=0;b<fa.length;b++)a=fa[b],l(la[a],Y(a,ha[a]))}
function sb(a){q=p=0;w=1;if(N)if(N.onerror)Ab(N);else{var b=N;setTimeout(function(){b&&N!==b&&(Ab(b),b=null)},650);ub();Z()}O&&ea(O,!1);Nb(a);Db(C-1);g(Ya,"error");wb(C);m(M);Z();a=Q.title;var c=Y("description"),e=Y("button"),f=a||c||e;f&&(a&&(Qa.firstChild.nodeValue=a),c&&(Ra.firstChild.nodeValue=c),e&&(Sa.firstChild.nodeValue=e),l(Qa,a),l(Ra,c),l(Sa,e),h(O,"transform","all"===Ba?"":"none"));Ba||d(n,"menu");ea(O,Pa&&f);ea(Ta,G||1<C);ea(Ua,G||C<D);Wa.firstChild.nodeValue=1<D?C+" / "+D:"";ya&&ya(C,
F)};window.Spotlight={init:bb,theme:ib,fullscreen:db,download:jb,autofit:fb,next:lb,prev:kb,goto:Mb,close:cb,zoom:Lb,menu:Ib,show:function(a,b,c){E=a;b&&(va=b,xa=b.onshow,ya=b.onchange,za=b.onclose,c=c||b.index);qb(c)},play:W,addControl:V,removeControl:function(a){var b=la[a];b&&(Oa.removeChild(b),la[a]=null)}};}).call(this);
