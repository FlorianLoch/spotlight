/**
 * Spotlight.js v0.7.31
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b){a.classList.add(b)}function g(a,b){a.classList.remove(b)}function h(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){h(a,"transition","none");b();aa||(aa=a.clientTop&&0);h(a,"transition","")}function k(a,b,c,e){a.addEventListener(b,c,e||!1===e?e:!0)}function ca(a,b,c,e){a.removeEventListener(b,c,e||!1===e?e:!0)}function da(a,b){a.stopPropagation();b&&a.preventDefault()};var l=document.createElement("div");l.id="spotlight";l.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";/*
 toggle_autofit &&*/
var m="theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),ea={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1},fa=document.createElement("video"),n={},ha={},p,r,ia,ja,t,ka,u,v,w,la,ma,na,x,y,z,A,B,C,D,E,oa,pa,qa,ra,sa,ta,F,ua,va,wa,xa,ya,za,Aa,Ba,G,H,J,K,L,M,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,N,O,Ma,P,Q,Na,R,Oa;k(document,"click",Pa);
function Qa(){function a(c){return n[c]=(l||document).getElementsByClassName("spl-"+c)[0]}if(!H){H=document.body;M=a("scene");Ca=a("header");Da=a("footer");Ea=a("title");Fa=a("description");Ga=a("button");Ha=a("prev");Ia=a("next");Ka=a("page");N=a("progress");K=[a("pane")];S("close",Ra);H[R="requestFullscreen"]||H[R="msRequestFullscreen"]||H[R="webkitRequestFullscreen"]||H[R="mozRequestFullscreen"]||(R="");R?(Oa=R.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),
Ja=S("fullscreen",Sa)):m.pop();S("autofit",T);S("zoom-in",Ta);S("zoom-out",Ua);S("theme",Va);La=S("play",U);S("download",Wa);k(Ha,"click",Xa);k(Ia,"click",V);var b=a("track");k(b,"mousedown",Ya);k(b,"mousemove",$a);k(b,"mouseleave",ab);k(b,"mouseup",ab);k(b,"touchstart",Ya,{passive:!1});k(b,"touchmove",$a,{passive:!0});k(b,"touchend",ab);k(Ga,"click",function(){xa?xa(z,C):wa&&(location.href=wa)})}}
function S(a,b){var c=document.createElement("div");c.className="spl-"+a;k(c,"click",b);Ca.appendChild(c);return n[a]=c}function Pa(a){var b=a.target.closest(".spotlight");if(b){da(a,!0);a=b.closest(".spotlight-group");B=(a||document).getElementsByClassName("spotlight");for(var c=0;c<B.length;c++)if(B[c]===b){D=a&&a.dataset;bb(c+1);break}}}
function bb(a){if(A=B.length){H||Qa();pa&&pa(a);for(var b=K[0],c=b.parentNode,e=K.length;e<A;e++){var f=b.cloneNode(!1);h(f,"left",100*e+"%");c.appendChild(f);K[e]=f}J||(H.appendChild(l),cb());z=a||1;W(M);db(!0);history.pushState({spl:1},"");history.pushState({spl:2},"");eb(l);d(H,"hide-scrollbars");d(l,"show");fb(!0);cb();X();F&&U()}}function Y(a,b){a=C[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function gb(a){a?ba(L,gb):((Ba?eb:W)(M),h(L,"opacity",Aa?0:1),hb(za&&.8),G&&d(L,G))}
function ib(a,b){J=K[a-1];L=J.firstChild;z=a;if(L)x&&T(),sa&&d(L,sa),gb(!0),G&&g(L,G),Aa&&h(L,"opacity",1),za&&h(L,"transform",""),h(L,"visibility","visible"),b&&Ma&&(document.createElement("img").src=Ma);else{var c=O.media,e=Y("spinner",!0);e&&d(l,"spinner");"video"===c?(L=document.createElement("video"),L.onloadedmetadata=function(){L.width=L.videoWidth;L.height=L.videoHeight;jb();e&&g(l,"spinner");ib(a,b)},L.poster=C.poster,L.preload=va?"auto":"metadata",L.controls=Y("controls",!0),L.autoplay=
F,L.h=Y("inline"),L.muted=Y("muted"),L.src=O.src,J.appendChild(L)):"node"===c?(L=O.src,"string"===typeof L&&(L=document.querySelector(L)),L.g||(L.g=L.parentNode),jb(),e&&g(l,"spinner"),J.appendChild(L),ib(a,b)):(L=document.createElement("img"),L.onload=function(){e&&g(l,"spinner");u=L.width;v=L.height;ib(a,b)},L.onerror=function(){J.removeChild(this)},L.crossOrigin="anonymous",L.src=O.src,J.appendChild(L));L&&(e||h(L,"visibility","visible"))}}
function kb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function lb(){cb();L&&jb();R&&(kb()?d(Ja,"on"):(g(Ja,"on"),mb(Ja,0<=screen.availHeight-window.outerHeight)))}function cb(){t=l.clientWidth;ka=l.clientHeight}function jb(){u=L.clientWidth;v=L.clientHeight}function hb(a){h(L,"transform","translate(-50%, -50%) scale("+(a||w)+")")}function Z(a,b){h(J,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function nb(a,b,c){b?ba(M,function(){nb(a,!1,c)}):h(M,"transform","translateX("+(100*-a+(c||0))+"%)")}function fb(a){a=a?k:ca;a(window,"keydown",ob);a(window,"wheel",pb);a(window,"resize",lb);a(window,"popstate",qb)}function qb(a){J&&a.state.spl&&Ra(!0)}function ob(a){if(J)switch(a.keyCode){case 8:T();break;case 27:Ra();break;case 32:F&&U();break;case 37:Xa();break;case 39:V();break;case 38:case 107:case 187:Ta();break;case 40:case 109:case 189:Ua()}}
function pb(a){J&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Ua():Ta())}function U(a){("boolean"===typeof a?a:!P)?P||(P=setInterval(V,1E3*ya),d(La,"on"),oa&&rb(!0)):P&&(P=clearInterval(P),g(La,"on"),oa&&rb())}function rb(a){ba(N,function(){h(N,"transition-duration","");h(N,"transform","")});a&&(h(N,"transition-duration",ya+"s"),h(N,"transform","translateX(0)"))}function X(){ta&&(Na=Date.now()+2950,Q||(d(l,"menu"),tb(3E3)))}
function tb(a){Q=setTimeout(function(){var b=Date.now();b>=Na?(g(l,"menu"),Q=0):tb(Na-b)},a)}function ub(a){"boolean"===typeof a&&(Q=a?Q:0);Q?(Q=clearTimeout(Q),g(l,"menu")):X()}function Ya(a){da(a,!0);la=!0;ma=!1;var b=a.touches;b&&(b=b[0])&&(a=b);na=u*w<=t;ia=a.pageX;ja=a.pageY;W(J)}function ab(a){da(a);if(la){if(ma){if(na&&ma){var b=(a=p<-(t/7)&&(z<A||E))||p>t/7&&(1<z||E);if(a||b)nb(z-1,!0,p/t*100),a&&V()||b&&Xa();p=0;Z()}eb(J)}else ub();la=!1}}
function $a(a){da(a);if(la){var b=a.touches;b&&(b=b[0])&&(a=b);b=(u*w-t)/2;p-=ia-(ia=a.pageX);na||(p>b?p=b:p<-b&&(p=-b),v*w>ka&&(b=(v*w-ka)/2,r-=ja-(ja=a.pageY),r>b?r=b:r<-b&&(r=-b)));ma=!0;Z(p,r)}else X()}function Sa(a){var b=kb();if("boolean"!==typeof a||a!==!!b)if(b)document[Oa]();else l[R]()}function Va(a){"string"!==typeof a&&(a=y?"":ua||"white");y!==a&&(y&&g(l,y),a&&d(l,a),y=a)}
function T(a){"boolean"===typeof a&&(x=!a);(x=1===w&&!x)?d(L,"autofit"):g(L,"autofit");h(L,"transform","");w=1;r=p=0;u=L.width;v=L.height;W(J);Z()}function Ta(){var a=w/.65;50>=a&&(x&&T(),p/=.65,r/=.65,Z(p,r),vb(a))}function Ua(){var a=.65*w;x&&T();1<=a&&(1===a?p=r=0:(p*=.65,r*=.65),Z(p,r),vb(a))}function vb(a){w=a||1;hb()}function Wa(){var a=document.createElement("a");a.href=L.src;a.download=L.src.substring(L.src.lastIndexOf("/")+1);H.appendChild(a);a.click();H.removeChild(a)}
function Ra(a){setTimeout(function(){H.removeChild(l);J=L=O=C=D=B=pa=qa=ra=xa=null},200);g(H,"hide-scrollbars");g(l,"show");Sa(!1);fb();history.go(!0===a?-1:-2);P&&U(!1);L&&wb(L);Q&&(Q=clearTimeout(Q));ra&&ra()}function wb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a)}}function Xa(a){a&&X();if(1<A){if(1<z)return xb(z-1);if(E)return nb(A,!0),xb(A)}}function V(a){a&&X();if(1<A){if(z<A)return xb(z+1);if(E)return nb(-1,!0),xb(1);P&&U(!1)}}
function xb(a){if(a!==z){P||X();P&&(P=clearInterval(P),U());var b=a>z;z=a;db(b);return!0}}var yb=navigator.connection,zb=window.devicePixelRatio||1;
function Ab(a,b,c){if("node"!==c.media)for(var e=Object.keys(c),f=0,q;f<e.length;f++)if(q=e[f],3<q.length&&0===q.indexOf("src"))if("video"===c.media){var I=ha[q];if(I){if(0<I){var Za=c[q];break}}else if(fa.canPlayType("video/"+q.substring(3).toLowerCase())){ha[q]=1;Za=c[q];break}else ha[q]=-1}else if(I=parseInt(q.substring(4),10))if(I=Math.abs(b-I),!sb||I<sb){var sb=I;Za=c[q]}return Za||c.src||c.href||a.src||a.href}
function Bb(){var a=B[z-1],b=a;C={};D&&Object.assign(C,D);Object.assign(C,b.dataset||b);xa=C.onclick;ua=Y("theme");ta=Y("autohide",!0);E=Y("infinite");oa=Y("progress",!0);F=Y("autoplay");va=Y("preload",!0);wa=Y("buttonHref");ya=F&&parseFloat(F)||7;y||ua&&Va(ua);if(b=C.control){b="string"===typeof b?b.split(","):b;for(var c=0;c<m.length;c++)C[m[c]]=!1;for(c=0;c<b.length;c++){var e=b[c].trim();"zoom"===e?C["zoom-in"]=C["zoom-out"]=!0:C[e]=!0}}b=C.animation;za=Aa=Ba=!b;G=!1;if(b)for(b="string"===typeof b?
b.split(","):b,c=0;c<b.length;c++)e=b[c].trim(),"scale"===e?za=!0:"fade"===e?Aa=!0:"slide"===e?Ba=!0:e&&(G=e);sa=C.fit;c=yb&&yb.downlink;b=Math.max(ka,t)*zb;c&&1200*c<b&&(b=1200*c);var f;c=C.media;e=Ab(a,b,C);var q;(q=a.alt||a.title)||(q=(f=(a||document).getElementsByTagName("img")[0])&&(f.alt||f.title));O={media:c,src:e,title:Y("title",q)};Ma="";va&&(a=B[z])&&(f=a.dataset||a,f.media&&"image"!==f.media||(Ma=Ab(a,b,f)));for(a=0;a<m.length;a++)f=m[a],mb(n[f],Y(f,ea[f]))}
function db(a){r=p=0;w=1;Bb();nb(z-1);if(L){var b=L;setTimeout(function(){b&&L!==b&&(wb(b),b=null)},650);gb()}ib(z,a);J&&(W(J),Z());a=O.title;var c=Y("description"),e=Y("button"),f=a||c||e;f&&(a&&(Ea.firstChild.nodeValue=a),c&&(Fa.firstChild.nodeValue=c),e&&(Ga.firstChild.nodeValue=e),mb(Ea,a),mb(Fa,c),mb(Ga,e),h(Da,"transform","all"===ta?"":"none"));ta||d(l,"menu");Cb(Da,f);Cb(Ha,E||1<z);Cb(Ia,E||z<A);Ka.firstChild.nodeValue=1<A?z+" / "+A:"";qa&&qa(z,C)}
function mb(a,b){h(a,"display",b?"":"none")}function Cb(a,b){h(a,"visibility",b?"":"hidden")}function W(a){h(a,"transition","none")}function eb(a){h(a,"transition","")};window.Spotlight={init:Qa,theme:Va,fullscreen:Sa,download:Wa,autofit:T,next:V,prev:Xa,goto:xb,close:Ra,zoom:vb,menu:ub,show:function(a,b,c){B=a;b&&(D=b,pa=b.onshow,qa=b.onchange,ra=b.onclose,c=c||b.index);bb(c)},play:U,addControl:S,removeControl:function(a){var b=n[a];b&&(Ca.removeChild(b),n[a]=null)}};}).call(this);
