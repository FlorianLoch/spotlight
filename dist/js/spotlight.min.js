/**
 * Spotlight.js v0.7.2
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b){a.classList.remove(b)}function g(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ca(a,b){g(a,"transition","none");b();aa||(aa=a.clientTop&&0);g(a,"transition","")}function h(a,b,c,e){a.addEventListener(b,c,e||!1===e?e:!0)}function da(a,b,c,e){a.removeEventListener(b,c,e||!1===e?e:!0)}function ea(a,b){a.stopPropagation();b&&a.preventDefault()};var k=document.createElement("div");k.id="spotlight";k.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-arrow-left></div><div class=spl-arrow-right></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div>";/*
 toggle_autofit &&*/
var l="theme download play page close autofit zoom-in zoom-out arrow-left arrow-right fullscreen".split(" "),fa={page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,"arrow-left":1,"arrow-right":1,fullscreen:1},ha=document.createElement("video"),m={},ia={},n,p,ja,ka,r,la,t,u,v,ma,na,oa,w,x,y,z,A,B,C,pa,qa,ra,sa,ta,ua,D,E,va,wa,xa,ya,za,Aa,Ba,F,G,H,I,J,K,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,L,M,Ma,N,O,Na,P,Oa;h(document,"click",Pa);
function Qa(){function a(c){return m[c]=(k||document).getElementsByClassName("spl-"+c)[0]}G=document.body;K=a("scene");Ca=a("header");Da=a("footer");Ea=a("title");Fa=a("description");Ga=a("button");Ha=a("arrow-left");Ia=a("arrow-right");Ka=a("page");L=a("progress");I=[a("pane")];Q("close",Ra);G[P="requestFullscreen"]||G[P="msRequestFullscreen"]||G[P="webkitRequestFullscreen"]||G[P="mozRequestFullscreen"]||(P="");P?(Oa=P.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Ja=Q("fullscreen",Sa)):l.pop();Q("autofit",R);Q("zoom-in",Ta);Q("zoom-out",Ua);Q("theme",Va);La=Q("play",S);Q("download",Wa);h(Ha,"click",Xa);h(Ia,"click",T);var b=a("track");h(b,"mousedown",Ya);h(b,"mousemove",Za);h(b,"mouseleave",$a);h(b,"mouseup",$a);h(b,"touchstart",Ya,{passive:!1});h(b,"touchmove",Za,{passive:!0});h(b,"touchend",$a);h(Ga,"click",function(){xa?xa(x,A):wa&&(location.href=wa)})}
function Q(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);Ca.appendChild(c);return m[a]=c}function Pa(a){var b=a.target.closest(".spotlight");if(b){ea(a,!0);a=b.closest(".spotlight-group");z=(a||document).getElementsByClassName("spotlight");for(var c=0;c<z.length;c++)if(z[c]===b){B=a&&a.dataset;ab(c+1);break}}}
function ab(a){if(y=z.length){G||Qa();qa&&qa(a);for(var b=I[0],c=b.parentNode,e=I.length;e<y;e++){var f=b.cloneNode(!1);g(f,"left",100*e+"%");c.appendChild(f);I[e]=f}H||(G.appendChild(k),bb());x=a||1;U(K);cb(!0);history.pushState({spl:1},"");history.pushState({spl:2},"");db(k);G.classList.add("hide-scrollbars");k.classList.add("show");eb(!0);bb();V();D&&S()}}function W(a,b){a=A[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function fb(a){a?ca(J,fb):((Ba?db:U)(K),g(J,"opacity",Aa?0:1),g(J,"transform","translate(-50%, -50%)"+(za?" scale(0.8)":"")),F&&J.classList.add(F))}
function gb(a,b){H=I[a-1];J=H.firstChild;x=a;if(J)w&&R(),ta&&J.classList.add(ta),fb(!0),F&&d(J,F),Aa&&g(J,"opacity",1),za&&g(J,"transform",""),g(J,"visibility","visible"),b&&Ma&&(document.createElement("img").src=Ma);else{var c=M.media,e=W("spinner",!0);e&&k.classList.add("spinner");"video"===c?(J=document.createElement("video"),J.onloadedmetadata=function(){J.width=J.videoWidth;J.height=J.videoHeight;hb();e&&d(k,"spinner");gb(a,b)},J.poster=A.poster,J.preload=va?"auto":"metadata",J.controls=W("controls",
!0),J.autoplay=D,J.h=W("inline"),J.muted=W("muted"),J.src=M.src,H.appendChild(J)):"node"===c?(J=M.src,"string"===typeof J&&(J=document.querySelector(J)),J.g||(J.g=J.parentNode),hb(),e&&d(k,"spinner"),H.appendChild(J),gb(a,b)):(J=document.createElement("img"),J.onload=function(){e&&d(k,"spinner");t=this.width;u=this.height;gb(a,b)},J.onerror=function(){H.removeChild(this)},J.crossOrigin="anonymous",J.src=M.src,H.appendChild(J));J&&(e||g(J,"visibility","visible"))}}
function ib(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function bb(){r=k.clientWidth;la=k.clientHeight;J&&hb();P&&(ib()?Ja.classList.add("on"):(d(Ja,"on"),X(Ja,0<=screen.availHeight-window.outerHeight)))}function hb(){t=J.clientWidth;u=J.clientHeight}function Y(a,b){g(H,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function Z(a,b,c){b?ca(K,function(){Z(a,!1,c)}):g(K,"transform","translateX("+(100*-a+(c||0))+"%)")}function eb(a){a=a?h:da;a(window,"keydown",jb);a(window,"wheel",kb);a(window,"resize",bb);a(window,"popstate",lb)}function lb(a){H&&a.state.spl&&Ra(!0)}function jb(a){if(H)switch(a.keyCode){case 8:R();break;case 27:Ra();break;case 32:D&&S();break;case 37:Xa();break;case 39:T();break;case 38:case 107:case 187:Ta();break;case 40:case 109:case 189:Ua()}}
function kb(a){H&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?Ua():Ta())}function S(a){("boolean"===typeof a?a:!N)?N||(N=setInterval(T,1E3*ya),La.classList.add("on"),pa&&mb(!0)):N&&(N=clearInterval(N),d(La,"on"),pa&&mb())}function mb(a){ca(L,function(){g(L,"transition-duration","");g(L,"transform","")});a&&(g(L,"transition-duration",ya+"s"),g(L,"transform","translateX(0)"))}function V(){ua&&(Na=Date.now()+1E3*ua-50,O||(k.classList.add("menu"),ob(1E3*ua)))}
function ob(a){O=setTimeout(function(){var b=Date.now();b>=Na?(d(k,"menu"),O=0):ob(Na-b)},a)}function pb(a){"boolean"===typeof a&&(O=a?O:0);O?(O=clearTimeout(O),d(k,"menu")):V()}function Ya(a){ea(a,!0);ma=!0;na=!1;var b=a.touches;b&&(b=b[0])&&(a=b);oa=t*v<=r;ja=a.pageX;ka=a.pageY;U(H)}function $a(a){ea(a);if(ma){if(na){if(oa&&na){var b=(a=n<-(r/7)&&(x<y||C))||n>r/7&&(1<x||C);if(a||b)Z(x-1,!0,n/r*100),a&&T()||b&&Xa();n=0;Y()}db(H)}else pb();ma=!1}}
function Za(a){ea(a);if(ma){var b=a.touches;b&&(b=b[0])&&(a=b);b=(t*v-r)/2;n-=ja-(ja=a.pageX);oa||(n>b?n=b:n<-b&&(n=-b),u*v>la&&(b=(u*v-la)/2,p-=ka-(ka=a.pageY),p>b?p=b:p<-b&&(p=-b)));na=!0;Y(n,p)}else V()}function Sa(a){var b=ib();if("boolean"!==typeof a||a!==!!b)if(b)document[Oa]();else k[P]()}function Va(a){"object"===typeof a&&(a=E?"":"white");E!==a&&(E&&d(k,E),a&&k.classList.add(a),E=a)}
function R(a){"boolean"===typeof a&&(w=!a);(w=1===v&&!w)?J.classList.add("autofit"):d(J,"autofit");g(J,"transform","");t=J.width;u=J.height;v=1;p=n=0;U(H);Y();V()}function Ta(a){var b=v/.65;50>=b&&(w&&R(),n/=.65,p/=.65,Y(n,p),qb(b));a||V()}function Ua(a){var b=.65*v;w&&R();1<=b&&(1===b?n=p=0:(n*=.65,p*=.65),Y(n,p),qb(b));a||V()}function qb(a){v=a||1;g(J,"transform","translate(-50%, -50%) scale("+v+")")}
function Wa(){var a=document.createElement("a");a.href=J.src;a.download=J.src.substring(J.src.lastIndexOf("/")+1);G.appendChild(a);a.click();G.removeChild(a)}function Ra(a){setTimeout(function(){G.removeChild(k);H=J=M=A=B=z=qa=ra=sa=xa=null},200);d(G,"hide-scrollbars");d(k,"show");Sa(!1);eb();history.go(!0===a?-1:-2);N&&S(!1);J&&rb(J);sa&&sa()}function rb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a)}}
function Xa(a){a&&V();if(1<y){if(1<x)return sb(x-1);if(C)return Z(y,!0),sb(y)}}function T(a){a&&V();if(1<y){if(x<y)return sb(x+1);if(C)return Z(-1,!0),sb(1);N&&S(!1)}}function sb(a){if(a!==x){N||V();N&&(N=clearInterval(N),S());var b=a>x;x=a;cb(b);return!0}}var tb=navigator.connection,ub=window.devicePixelRatio||1;
function vb(a,b,c){var e;if("video"===J||!(e=c.src||c.href||a.src||a.href)){a=Object.keys(c);for(var f=0,q;f<a.length;f++)if(q=a[f],0===q.indexOf("src"))if("video"===J){var ba=ia[q];if(ba){if(0<ba){e=c[q];break}}else if(ha.canPlayType("video/"+q.substring(3).toLowerCase())){ia[q]=1;e=c[q];break}else ia[q]=-1}else if(ba=Math.abs(b-parseInt(q.substring(4),10)),!nb||ba<nb){var nb=ba;e=c[q]}}return e}
function wb(){var a=z[x-1],b=a;A={};B&&Object.assign(A,B);Object.assign(A,b.dataset||b);Va(A.theme);ua=W("autohide",3);C=W("infinite");pa=W("progress",!0);D=W("autoplay");va=W("preload",!0);wa=W("buttonHref");D&&(ya=parseFloat(D)||7);if(b=A.control){b="string"===typeof b?b.split(","):b;for(var c=0;c<l.length;c++)A[l[c]]=!1;for(c=0;c<b.length;c++){var e=b[c].trim();"zoom"===e?A["zoom-in"]=A["zoom-out"]=!0:A[e]=!0}}b=A.animation;za=Aa=Ba=!b;F=!1;if(b)for(b="string"===typeof b?b.split(","):b,c=0;c<b.length;c++)e=
b[c].trim(),"scale"===e?za=!0:"fade"===e?Aa=!0:"slide"===e?Ba=!0:e&&(F=e);ta=A.fit;c=tb&&tb.downlink;b=Math.max(la,r)*ub;c&&1200*c<b&&(b=1200*c);var f;c=A.media;e=vb(a,b,A);var q;(q=a.alt||a.title)||(q=(f=(a||document).getElementsByTagName("img")[0])&&(f.alt||f.title));M={media:c,src:e,title:W("title",q)};Ma="";va&&(a=z[x])&&(f=a.dataset||a,f.media&&"image"!==f.media||(Ma=vb(a,b,f)));for(a=0;a<l.length;a++)f=l[a],X(m[f],W(f,fa[f]))}
function cb(a){p=n=0;v=1;wb();Z(x-1);if(J){var b=J;setTimeout(function(){b&&J!==b&&(rb(b),b=null)},650);fb()}gb(x,a);H&&(U(H),Y());a=M.title;var c=W("description"),e=W("button"),f=a||c||e;f&&(a&&(Ea.firstChild.nodeValue=a),c&&(Fa.firstChild.nodeValue=c),e&&(Ga.firstChild.nodeValue=e),X(Ea,a),X(Fa,c),X(Ga,e));xb(Da,f);xb(Ha,C||1<x);xb(Ia,C||x<y);Ka.firstChild.nodeValue=1<y?x+" / "+y:"";ra&&ra(x,A)}function X(a,b){g(a,"display",b?"":"none")}function xb(a,b){g(a,"visibility",b?"":"hidden")}
function U(a){g(a,"transition","none")}function db(a){g(a,"transition","")};window.Spotlight={theme:Va,fullscreen:Sa,download:Wa,autofit:R,next:T,prev:Xa,goto:sb,close:Ra,zoom:qb,menu:pb,show:function(a,b,c){z=a;b&&(B=b,qa=b.onshow,ra=b.onchange,sa=b.onclose,xa=b.onclick,c=c||b.index);ab(c)},play:S,addControl:Q,removeControl:function(a){var b=m[a];b&&(Ca.removeChild(b),m[a]=null)}};}).call(this);
